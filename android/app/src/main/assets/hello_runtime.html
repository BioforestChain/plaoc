<!DOCTYPE html>
<html>

<head>
   <meta charset="utf-8">
   <title>测试</title>
   <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>

<body>
   <fieldset>
      <script type="module">
         import { openDWebView, openScanner } from "https://bmr9vohvtvbvwrs3p4bwgzsmolhtphsvvj.dweb/bfs/index.mjs";
         (function () {
            const openAPP = function navTo(url) {
               openDWebView({
                  id: "bMr9vohVtvBvWRS3p4bwgzSMoLHTPHSvVj",
                  name: "defaultApp",
                  versionCode: 1,
                  minBfsVersionCode: 1,
                  defaultEntry: url,
               });
            }
         })()

      </script>
      <h1>启动内建app</h1>
      <button onclick="openAPP('./app/bfchain.dev/index.html')" type="button">启动app.bfchain.dev
      </button>
   </fieldset>
   <fieldset>
      <h2>拦截https://appID.dweb请求测试</h2>
      <div id="response"></div>
      <button onclick="testUrl('/getBlockInfo')" ∂>
         getBlockInfo
      </button>
      <button onclick="testUrl('/getBlockHigh')">
         getBlockHigh
      </button>
      <script type="text/javascript">
         async function testUrl(url) {
            let msg = await onClick(url);
            document.getElementById('response').innerHTML += `拦截结果：${msg}`
         }
         function onClick(url) {
            return axios.post(url)
               .then((response) => {
                  // handle success
                  console.log('sucess onClick', JSON.stringify(response.data));
                  return JSON.stringify(response.data);
               }).catch((e) => {
                  console.log('error onClick', JSON.stringify(e));
                  return e
               })
         }
      </script>
   </fieldset>
   <fieldset>
      <h2>从android拿回数据</h2>
      <div id="navigator"></div>
      <dweb-navigator onCreate="callAndroid('dweb-navigator')"></dweb-navigator>
   </fieldset>
</body>

</html>
